{% extends 'layout.html.j2' %}

{% block content %}
<div class="max-w-4xl mx-auto">
  {% if article %}
  <!-- Article View Mode -->
  <div class="bg-white rounded-lg shadow-md overflow-hidden" id="article-content">
    <div  class="p-6">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">
        {{ article.title }}
      </h1>

      <div class="flex items-center text-gray-500 text-sm mb-6">
        <span>By {{ article.author.name }}</span>
        <span class="mx-2">â€¢</span>
        <span>{{ article.at }}</span>
      </div>

      {% if article.images and article.images|length > 0 %}
      <div class="mb-6 flex gap-4 overflow-x-auto py-2">
        {% for image in article.images %}
        <img src="{{ image.path }}" alt="Article image" class="rounded-lg max-h-80 object-cover" />
        {% endfor %}
      </div>
      {% endif %}

      <div class="prose max-w-none">{{ article.content|safe }}</div>

      {% if user_id == article.author.id %}
      <div class="mt-8 flex gap-4">
        <a href="/article/{{ article.id }}/edit"
          class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700 transition duration-200">
          Edit Article
        </a>

        <button hx-delete="/article/{{ article.id }}" hx-confirm="Are you sure you want to delete this article?"
           hx-push-url="true" hx-target="#article-content" hx-swap="outerHTML"
          class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition duration-200">
          Delete
        </button>
      </div>
      {% endif %}
    </div>
  </div>
  {% else %}
  <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6" role="alert">
    <p>Article not Found</p>
  </div>
  {% endif %}
</div>
{% endblock %}
